<!-- Chargement-->
<mat-progress-bar
  *ngIf="isLoading"
  mode="indeterminate"
  class="progress-bar"
></mat-progress-bar>
<mat-card *ngIf="!isLoading">
  <mat-card-content>
    <p><b>Description :</b> {{ assignmentTarget?.description }}</p>
    <p *ngIf="assignmentTarget?.updatedAt">
      <b>Mis a jour le :</b> {{ assignmentTarget?.updatedAt }}
    </p>
    <img
      *ngIf="subjectImgPath"
      src="{{ subjectImgPath }}"
      width="100"
      height="100"
    />
    <p><b>Matière :</b> {{ targetSubject?.name }}</p>
    <div *ngIf="teacherImgPath">
      <img src="{{ teacherImgPath }}" width="100" height="100" />
      <p>Professeur</p>
    </div>
  </mat-card-content>
  <!-- [disabled]="!isAdmin()" -->
</mat-card>

<!-- Create 3 tabs angular mat -->
<mat-card *ngIf="assignmentTarget">
  <mat-card-title>{{ assignmentTarget.title }}</mat-card-title>
  <mat-card-header>
    <mat-card-subtitle
      >{{ assignmentTarget.createdAt | date }}
    </mat-card-subtitle>
  </mat-card-header>
  <mat-tab-group mat-stretch-tabs="true" class="fullWidth">
    <mat-tab label="Informations">
      <div>
        <table class="fullWidth">
          <tr>
            <td><b>Description</b></td>
            <td>{{ assignmentTarget.description }}</td>
          </tr>
          <tr>
            <td><b>Créer le</b></td>
            <td>{{ assignmentTarget.createdAt | date }}</td>
          </tr>
          <tr>
            <td><b>Mis a jour le</b></td>
            <td>{{ assignmentTarget.updatedAt | date }}</td>
          </tr>
          <tr>
            <td><b>Pour le</b></td>
            <td>{{ assignmentTarget.dueDate | date }}</td>
          </tr>
          <tr>
            <td><b>Matière</b></td>
            <td>{{ targetSubject?.name }}</td>
          </tr>
          <tr>
            <td><b>Temps restant</b></td>
            <td>{{ assignmentTimeRemaining }}</td>
          </tr>
          <tr>
            <td>
              <b> Etat :</b>
            </td>
            <td>{{ isAssignmentLate ? "Retard" : "Dans les temps" }}</td>
          </tr>
          <tr>
            <td><b>Rendu</b></td>
            <td>{{ assignmentTarget?.submission ? "Oui" : "Non" }}</td>
          </tr>
        </table>
      </div>
    </mat-tab>
    <mat-tab label="Rendu">
      <p *ngIf="!assignmentTarget.submission">Pas de rendu disponible</p>
      <div *ngIf="assignmentTarget.submission">
        <table class="fullWidth">
          <tr>
            <td><b>Type</b></td>
            <td>{{ assignmentTarget.submission.type }}</td>
          </tr>
          <tr>
            <td><b>Soumis le</b></td>
            <td>{{ assignmentTarget.submission.submittedAt | date }}</td>
          </tr>
          <tr>
            <td><b>Nom du fichier</b></td>
            <td>{{ file?.name }}</td>
          </tr>
          <tr>
            <td><b>Taille du fichier</b></td>
            <td>{{ file?.size }} octets</td>
          </tr>
        </table>
        <!-- le bouton telecharger -->
        <button
          mat-raised-button
          color="primary"
          (click)="downloadSubmission()"
        >
          Télécharger
        </button>
      </div>
    </mat-tab>
    <mat-tab label="Notation">Content</mat-tab>
  </mat-tab-group>

  <div>
    <button mat-raised-button color="primary" (click)="onSubmit()">
      Rendre
    </button>
    <button mat-raised-button color="primary" (click)="onEdit()">
      Modifier
    </button>
    <button mat-raised-button color="warn" (click)="onDelete()">
      Supprimer
    </button>
  </div>
</mat-card>

<mat-card color="warn" *ngIf="assignmentTarget === undefined">
  <h1>Oops, il a quitté notre monde.</h1>
</mat-card>
